{% extends 'myhome/index.html' %}

{% block title %}
<title>我的购物车</title>
{% endblock %}

{% block css %}
<!-- Font Awesome -->
<link href="/static/myadmin/assets/font-awesome/css/font-awesome.min.css" rel="stylesheet">
<!-- NProgress -->
<link href="/static/myadmin/assets/nprogress/nprogress.css" rel="stylesheet">
<link href="/static/myadmin/assets/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="/static/myadmin/assets/datatables.net-bs/css/dataTables.bootstrap.min.css" rel="stylesheet">
<link href="/static/myadmin/assets/datatables.net-buttons-bs/css/buttons.bootstrap.min.css" rel="stylesheet">
<link href="/static/myadmin/assets/datatables.net-fixedheader-bs/css/fixedHeader.bootstrap.min.css" rel="stylesheet">
<link href="/static/myadmin/assets/datatables.net-responsive-bs/css/responsive.bootstrap.min.css" rel="stylesheet">
<link href="/static/myadmin/assets/datatables.net-scroller-bs/css/scroller.bootstrap.min.css" rel="stylesheet">
<!-- iCheck -->
<link href="/static/myadmin/assets/iCheck/skins/flat/green.css" rel="stylesheet">
<link rel="stylesheet" href="/static/myhome/theme/css/allstyle.css">


{% endblock %}

{% block ordertop %}
<div class="container clearfix">
    <div class="header-logo fl" style="width:212px;">
        <h1><a href="{% url 'myhome_index' %}"><img src="/static/myhome/theme/icon/logo.png" height="70"></a></h1>
    </div>
    <div class="pc-order-titlei fl" style="margin-top:5px;">
        <h2>填写订单</h2>
    </div>
    <div class="pc-step-title fl">
        <ul>
            <li class="cur"><a href="#">1 . 我的购物车</a></li>
            <li class="cur2"><a href="#">2 . 填写核对订单</a></li>
            <li class="cur2"><a href="#">3 . 成功提交订单</a></li>
        </ul>
    </div>
</div>
{% endblock %}

{% block yHeader %}

{% endblock %}

{% block banner %}
{% endblock %}

{% block con %}
<!-- 页面内容 -->
<section>
    <div class="containers">
        <div id="datatable-checkbox_wrapper" class="dataTables_wrapper form-inline dt-bootstrap no-footer">

            <div class="row">
                <div class="col-sm-12">
                    <table id="datatable-checkbox" class="table table-striped table-bordered bulk_action  no-footer"
                        role="grid" aria-describedby="datatable-checkbox_info">
                        <thead>
                            <tr class="text-h" role="row" style="text-align: center;">
                                <th class="sorting" aria-controls="datatable-checkbox"
                                    style="width: 30px;">
                                    <div style="margin-top:5px;"  v-model="all" >全选</div>
             
                                    <input class="checkbox allselect" type="checkbox" id="inlineCheckbox2" value="option1">
                                </th>
                                <th class="sorting" tabindex="0" aria-controls="datatable-checkbox"
                                    aria-label="商品信息: activate to sort column ascending" style="width: 167px;">商品信息</th>
                                <th class="sorting" tabindex="0" aria-controls="datatable-checkbox"
                                    aria-label="单价: activate to sort column ascending" style="width: 80px;"></th>
                                <th class="sorting" tabindex="0" aria-controls="datatable-checkbox"
                                    aria-label="单价: activate to sort column ascending" style="width: 70px;">单价</th>
                                <th class="sorting" tabindex="0" aria-controls="datatable-checkbox"
                                    aria-label="Age: activate to sort column ascending" style="width: 60px;">数量</th>
                                <th class="sorting" tabindex="0" aria-controls="datatable-checkbox" colspan="1"
                                    aria-label="Start date: activate to sort column ascending" style="width: 50px;">全额
                                </th>
                                <th class="sorting" tabindex="0" aria-controls="datatable-checkbox"
                                    aria-label="Salary: activate to sort column ascending" style="width: 60px;">操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for v in cartdata %}
                            <tr role="row" class="odd selected text-h">
                                <td class="sorting"  aria-controls="datatable-checkbox"
                                    style="width: 30px;">
                                    <div class=" mtop" style="position: relative;">
                                        <input class="checkbox" type="checkbox" id="inlineCheckbox2" value="option1">
                                        <!-- <span class="checkcoat"></span> -->
                                    </div>
                                </td>
                                <!-- <td><input  type="checkbox"></td> -->
                                <td style="text-align: left ;">
                                    <div>
                                        <a href="{% url 'myhome_info' %}?goodsid={{ v.goodsid_id }}"><img
                                                src="{{ v.goodsid.pic_url }}" width="80"></a>
                                        &nbsp;<a
                                            href="{% url 'myhome_info' %}?goodsid={{ v.goodsid_id }}">{{ v.goodsid.goodsname}}</a>
                                    </div>
                                </td>
                                <td>
                                    <div class="mtop">
                                        颜色：{{ v.color }}
                                        <br>


                                        尺码：{{ v.sizes }}
                                    </div>
                                </td>
                                <td>
                                    <div class="mtop">
                                        <i class="fa fa-yen"></i> {{ v.goodsid.price }}

                                    </div>
                                </td>
                                <td>
                                    <div class="mtop">
                                        <div class=" btn-group  btn-group-sm" style="width:150px;margin-left: 10px;">
                                            <a href="javascript:void(0);" class="btn btn-default "
                                                id="amount2{{ v.goodsid_id }}"><i
                                                    class="glyphicon glyphicon-minus"></i></a>
                                            <input class="col-md-1 subnum" value="{{ v.num }}" type="text"
                                                id="subnum{{ v.goodsid_id }}"
                                                style="height:32px;width: 50px;text-align: center;">
                                            <a href="javascript:void(0);" class="btn btn-default "
                                                id="amount1{{ v.goodsid_id }}"><i
                                                    class="glyphicon glyphicon-plus"></i></a>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="mtop">
                                        <i class="fa fa-yen"></i>
                                        {% widthratio v.goodsid.price 1 v.num %}
                                    </div>
                                </td>
                                <td>
                                    <div class="mtop">
                                        <a href="javascript:void(0);" style="color:#ccc;font-size: 18px;"><i
                                                class="fa fa-trash"></i> 删除</a>
                                    </div>
                                </td>
                            </tr>
                            <script>
                                $('#amount2{{ v.goodsid_id }}').click(function () {
                                    var num_input = $("#subnum{{ v.goodsid_id }}");
                                    var buy_num = (num_input.val() - 1) > 0 ? (num_input.val() - 1) : 1;
                                    num_input.val(buy_num);
                                });

                                $('#amount1{{ v.goodsid_id }}').click(function () {
                                    var num_input = $("#subnum{{ v.goodsid_id }}");
                                    var buy_num = Number(num_input.val()) + 1;
                                    num_input.val(buy_num);
                                });
                            </script>
                            {% endfor %}

                        </tbody>
                    </table>
                </div>
            </div>

        </div>


        <div class="clearfix">
            <div class="fr pc-list-t">
                <ul>
                    <li><span><b>2</b> 件商品，总商品金额：</span> <em>￥558.00</em></li>
                    <li><span>减额：</span> <em>￥558.00</em></li>
                    <li><span>运费：</span> <em>￥558.00</em></li>
                    <li><span>应付总额：</span> <em>￥558.00</em></li>
                    <li><span>减额：</span> <em>￥558.00</em></li>
                </ul>
            </div>
        </div>

        <div class="pc-space-n"></div>
        <div class="clearfix">
            <div class="fr pc-space-j">
                <spna>应付总额：<strong>￥558.00</strong></spna>
                <button class="pc-submit">提交订单</button>
            </div>
        </div>
    </div>
</section>
<script>
    var checkbox = $('.odd :checkbox')
$('.allselect').click(function(){
    if(this.checked){

        checkbox.prop('checked',true);
    }else{
        checkbox.prop('checked',false);
    }
    
})
$('.mtop input').each(function(){
    var all=$(this).attr('checked');
        if(all==false){
            console.log(1);
        }
    })
</script>

{% endblock %}

{% block jsbanner %}
<!-- Bootstrap -->
<script src="/static/myadmin/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<!-- FastClick -->
<script src="/static/myadmin/assets/fastclick/lib/fastclick.js"></script>
<!-- iCheck -->
<script src="/static/myadmin/assets/iCheck/icheck.min.js"></script>
<!-- Datatables -->
<script src="/static/myadmin/assets/datatables.net/js/jquery.dataTables.min.js"></script>
<script src="/static/myadmin/assets/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
<script src="/static/myadmin/assets/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
<script src="/static/myadmin/assets/datatables.net-buttons-bs/js/buttons.bootstrap.min.js"></script>

{% endblock %}